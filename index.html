<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Untuk Kamu ‚Äî Album Kenangan üíñ</title>
  <style>
    /* Reset & font */
    * { box-sizing: border-box; font-family: "Poppins", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; }
    html,body { height:100%; margin:0; }

    /* Background image (blur + overlay) */
    .bg {
      position: fixed; inset:0; background: center/cover no-repeat url('bg.jpg');
      filter: blur(6px) saturate(1.05); transform: scale(1.02);
      z-index: 0;
    }
    .overlay {
      position: fixed; inset:0; background: linear-gradient(135deg, rgba(255,182,193,0.25), rgba(198,223,255,0.18));
      z-index: 1;
      backdrop-filter: contrast(1.02);
    }

    /* page content */
    .wrap {
      position: relative;
      z-index: 2;
      min-height: 100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 28px;
    }

    .card {
      width: 100%;
      max-width: 720px;
      background: rgba(255,255,255,0.12);
      border-radius: 20px;
      padding: 36px;
      text-align: center;
      color: #fff;
      box-shadow: 0 10px 30px rgba(10,10,30,0.25);
      border: 1px solid rgba(255,255,255,0.08);
      backdrop-filter: blur(6px);
    }

    .title {
      font-size: clamp(1.4rem, 2.2vw, 2.2rem);
      margin:0 0 8px 0;
      letter-spacing: 0.6px;
    }
    .sub {
      margin:0 0 20px 0; opacity:0.95;
      font-size: 1rem;
    }

    /* typing effect */
    .typing {
      font-size: 1.05rem; color: #ffedf2; margin-bottom: 18px; min-height: 28px;
      opacity: 0.98;
    }

    /* input area */
    .inputRow { display:flex; gap:12px; justify-content:center; align-items:center; margin-top:8px; }
    input[type="password"] {
      width: 320px;
      max-width: 60%;
      padding: 12px 16px;
      border-radius: 999px;
      border: none;
      outline: none;
      font-size: 1rem;
      text-align: center;
      background: rgba(255,255,255,0.09);
      color: #fff;
      box-shadow: inset 0 -2px 8px rgba(0,0,0,0.25);
    }
    .btnOpen {
      padding: 12px 22px;
      border-radius: 999px;
      border: none;
      font-weight: 600;
      cursor: pointer;
      background: linear-gradient(135deg,#ff8aa0,#c093e6);
      color: #fff;
      box-shadow: 0 6px 20px rgba(200,100,180,0.18);
      transition: transform .18s ease, box-shadow .18s ease;
    }
    .btnOpen:hover { transform: translateY(-3px); box-shadow: 0 10px 30px rgba(200,100,180,0.28); }

    .hint { margin-top:12px; opacity:0.9; font-style:italic; color: #ffeef6; }

    /* big music button center-bottom */
    .musicWrap {
      position: fixed; left: 50%; transform: translateX(-50%); bottom: 36px; z-index:3;
      display:flex; gap:12px; align-items:center; justify-content:center;
    }
    .musicBtn {
      width: 84px; height: 84px; border-radius: 50%;
      display:flex; align-items:center; justify-content:center;
      font-size: 28px;
      background: radial-gradient(circle at 30% 20%, #ffd3e0, #ff6b8a 60%);
      color: #fff; border: none; cursor:pointer;
      box-shadow: 0 10px 30px rgba(255,110,140,0.35);
      animation: heartbeat 2s infinite;
      transition: transform .18s ease, box-shadow .18s ease;
    }
    .musicBtn:hover { transform: scale(1.07); box-shadow: 0 18px 40px rgba(255,110,140,0.45); }
    @keyframes heartbeat {
      0% { transform: scale(1); }
      50% { transform: scale(1.07); }
      100% { transform: scale(1); }
    }

    .musicLabel { color:#fff; font-size:0.9rem; opacity:0.95; text-align:center; margin-top:6px; }

    /* hearts (background) */
    .hearts { position: fixed; inset:0; pointer-events:none; z-index:0; overflow:hidden; }
    .heart {
      position:absolute; color: rgba(255,240,245,0.95);
      animation: rise linear infinite;
      font-size: 16px;
      opacity:0.9;
      transform-origin:center;
    }
    @keyframes rise {
      0% { transform: translateY(0) scale(.8); opacity:0; }
      15% { opacity:0.9; }
      100% { transform: translateY(-120vh) scale(1.25); opacity:0; }
    }

    /* small responsive */
    @media (max-width:560px){
      input[type="password"]{ width: 60%; }
      .musicBtn{ width:70px; height:70px; font-size:22px;}
    }

    /* error shake */
    .error {
      color:#ffccd8; margin-top:10px; display:none;
    }
    .shake { animation: shakeX .35s; }
    @keyframes shakeX {
      0%{ transform:translateX(0); } 25%{ transform:translateX(-6px); } 75%{ transform:translateX(6px); } 100%{ transform:translateX(0); }
    }
  </style>
</head>
<body>

  <!-- Background image: replace 'bg.jpg' with the filename you upload -->
  <div class="bg" aria-hidden="true"></div>
  <div class="overlay" aria-hidden="true"></div>

  <!-- Decorative hearts -->
  <div class="hearts" aria-hidden="true"></div>

  <main class="wrap">
    <section class="card" role="main" aria-labelledby="title">
      <h1 id="title" class="title">HOW ARE YOU? üíñ</h1>
      <p class="sub">Buka halaman ini kalau rindu ‚ú®</p>

      <div class="typing" id="typing"></div>

      <div class="inputRow" aria-hidden="false">
        <input id="pw" type="password" inputmode="numeric" placeholder="Masukkan password..." autocomplete="off" />
        <button class="btnOpen" id="openBtn">Buka</button>
      </div>
      <div class="hint">Hint: tanggal aku confess</div>
      <div id="err" class="error">Password salah sayang üò¢</div>
    </section>
  </main>

  <!-- Music player (hidden iframe YouTube) -->
  <!-- Replace YOUTUBE_VIDEO_ID below with the video id -->
  <div id="youtube-player" style="display:none;"></div>

  <!-- Centered music button -->
  <div class="musicWrap" aria-hidden="false">
    <button id="musicBtn" class="musicBtn" aria-pressed="false" title="Play / Pause musik">‚ñ∂Ô∏è</button>
  </div>

  <script>
    /* ============================
       CONFIG ‚Äî GANTI SESUAI KEBUTUHAN
       ============================ */
    const PASSWORD = "06022022"; // <- password yang kamu pilih
    const DRIVE_LINK = "https://drive.google.com/drive/folders/1i4E2WWGcOjIvaiZVrxtll00aKxVfaWdN?usp=sharing"; // <- ganti dengan link Drive album kalian
    const YOUTUBE_VIDEO_ID = "Bk2ufuj9tgU?si=Bk2ufuj9tgU"; // <- dari link: https://youtu.be/vD5oMyLHspE https://youtu.be/Bk2ufuj9tgU?si=BHL3JgLpjz7A4q9r
    const BG_FILENAME = "bg.png"; // <- ganti jika kamu pakai nama file background lain
    /* ============================ */

    // If you uploaded a different name for the image, update src of background div:
    document.querySelector('.bg').style.backgroundImage = `url('${BG_FILENAME}')`;

    // Typing effect lines
    const lines = [
      "Hai Cantik... üíå",
      "Gimana kabarnya?",
      "Jujur kangen banget rasanya",
      "Kita udah seasing ini ternyata",
      "Semoga kamu bahagia terus ya disana",
      "Ada sedikit kenangan yang ingin kubagikan.",
      "Masukkan password dulu ya, jangan lupa play musiknya."
    ];

    // typing effect implementation
    const typingEl = document.getElementById('typing');
    let li = 0, ci = 0, forward = true;
    function typeLoop() {
      const text = lines[li];
      typingEl.textContent = text.slice(0, ci);
      if (forward) {
        ci++;
        if (ci > text.length) { forward = false; setTimeout(typeLoop, 1000); return; }
      } else {
        ci--;
        if (ci < 0) { forward = true; li = (li + 1) % lines.length; setTimeout(typeLoop, 400); return; }
      }
      setTimeout(typeLoop, forward ? 80 : 30);
    }
    typeLoop();

    /* Heart generator (background) */
    const hearts = document.querySelector('.hearts');
    function spawnHeart() {
      const h = document.createElement('div');
      h.className = 'heart';
      h.textContent = 'üíñ';
      const size = 14 + Math.random() * 28;
      h.style.fontSize = size + 'px';
      h.style.left = (Math.random() * 100) + 'vw';
      h.style.bottom = (-10 - Math.random()*20) + 'px';
      h.style.animationDuration = (6 + Math.random()*6) + 's';
      hearts.appendChild(h);
      setTimeout(() => h.remove(), 10000);
    }
    setInterval(spawnHeart, 420);

    /* ============================
       YOUTUBE IFRAME API (player)
       We'll create a hidden player and call playVideo() after interaction
       ============================ */
    let player;
    let musicPlaying = false;
    let userInteracted = false;

    function onYouTubeIframeAPIReady() {
      player = new YT.Player('youtube-player', {
        height: '0', width: '0',
        videoId: YOUTUBE_VIDEO_ID,
        playerVars: {
          autoplay: 0, controls: 0, modestbranding: 1, rel: 0, fs: 0, disablekb: 1, loop: 1, playlist: YOUTUBE_VIDEO_ID
        },
        events: {
          'onReady': () => { /* ready */ },
          'onStateChange': (e) => {
            // if ended (should loop), nothing else needed
          }
        }
      });
    }

    // load YT API script
    (function loadYT(){
      const s = document.createElement('script');
      s.src = "https://www.youtube.com/iframe_api";
      document.head.appendChild(s);
    })();

    // function to try start music (after user interaction)
    function tryStartMusic() {
      if (player && !musicPlaying) {
        // call playVideo and set volume low-mild
        try {
          player.playVideo();
          musicPlaying = true;
          updateMusicBtn();
        } catch(e) {
          // ignore
        }
      }
    }

    // music button logic
    const musicBtn = document.getElementById('musicBtn');
    musicBtn.addEventListener('click', () => {
      userInteracted = true;
      if (!player) { // maybe API not ready yet ‚Äî still mark interacting
        // do nothing now; when player ready, tryStartMusic() could be called
      }
      // toggle play/pause
      if (!musicPlaying) {
        tryStartMusic();
        // if API not ready, show as playing and allow play when ready
        musicBtn.innerHTML = '‚è∏Ô∏è';
        musicBtn.setAttribute('aria-pressed','true');
        musicPlaying = true;
      } else {
        if (player) player.pauseVideo();
        musicBtn.innerHTML = 'üéµ';
        musicBtn.setAttribute('aria-pressed','false');
        musicPlaying = false;
      }
    });

    // Start music on first typing or clicking open
    const pwEl = document.getElementById('pw');
    function ensureInteraction() {
      if (userInteracted) return;
      userInteracted = true;
      // if player ready, start it
      setTimeout(tryStartMusic, 300);
      musicBtn.innerHTML = '‚è∏Ô∏è';
      musicBtn.setAttribute('aria-pressed','true');
      musicPlaying = true;
    }
    pwEl.addEventListener('keydown', ensureInteraction);
    document.getElementById('openBtn').addEventListener('click', ensureInteraction);

    /* password check and redirect */
    function showError() {
      const e = document.getElementById('err');
      e.style.display = 'block';
      e.classList.add('shake');
      setTimeout(()=> e.classList.remove('shake'), 350);
      setTimeout(()=> e.style.display = 'none', 2500);
    }

    document.getElementById('openBtn').addEventListener('click', () => {
      const val = pwEl.value.trim();
      if (val === PASSWORD) {
        // redirect to DRIVE_LINK
        window.location.href = DRIVE_LINK;
      } else {
        showError();
      }
    });

    pwEl.addEventListener('keypress', (ev) => {
      if (ev.key === 'Enter') {
        ev.preventDefault();
        document.getElementById('openBtn').click();
      } else {
        // start music on first typed key
        ensureInteraction();
      }
    });

    /* Accessibility: allow spacebar focus to music button */
    document.addEventListener('keydown', (e)=> {
      if (e.key === ' ' && document.activeElement !== pwEl) {
        e.preventDefault();
        musicBtn.click();
      }
    });

    /* Note: If the YouTube iframe API hasn't initialised yet when user interacts,
       the play will be attempted again via tryStartMusic once player is ready.
    */

    /* Expose onYouTubeIframeAPIReady globally as required by YouTube API */
    window.onYouTubeIframeAPIReady = onYouTubeIframeAPIReady;

  </script>
</body>
</html>
